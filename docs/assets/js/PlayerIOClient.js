var $jscomp={scope:{}},JSON;$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(e,t,n,o){if(t){for(n=$jscomp.global,e=e.split("."),o=0;o<e.length-1;o++){var r=e[o];r in n||(n[r]={}),n=n[r]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&$jscomp.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(e){var t=0;return $jscomp.iteratorPrototype(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})},$jscomp.iteratorPrototype=function(e){return $jscomp.initSymbolIterator(),(e={next:e})[$jscomp.global.Symbol.iterator]=function(){return this},e},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(t,n){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var o=0,r={next:function(){if(o<t.length){var e=o++;return{value:n(e,t[e]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},$jscomp.polyfill("Array.prototype.entries",function(e){return e||function(){return $jscomp.iteratorFromArray(this,function(e,t){return[e,t]})}},"es6-impl","es3"),$jscomp.polyfill("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return e<0?-t:t}},"es6-impl","es3"),"undefined"==typeof _pio&&(_pio={}),_pio.channel=function(){},_pio.channel.prototype.call=function(e,t,o,r,i){var n="undefined"!=typeof PLAYERIO_API_HOST?PLAYERIO_API_HOST:(PlayerIO.useSecureApiRequests?"https":"http")+"://api.playerio.com/json/",a=new XMLHttpRequest;"withCredentials"in a?a.open("post",n,!0):"undefined"!=typeof XDomainRequest?(a=new XDomainRequest).open("post",n):a=new _pio.flashWebRequest("post",n);var s=Error();null!=a?(a.send("["+e+"|"+(this.token||"")+"]"+JSON.stringify(t)),a.onload=function(){var e=null;try{var t=a.response||a.responseText;if("["==t[0]){var n=t.indexOf("]");this.token=t.substring(1,n),t=t.substring(n+1)}e=JSON.parse(t)}catch(e){return void _pio.handleError(s,r,PlayerIOErrorCode.GeneralError,"Error decoding response from webservice: "+e)}if(void 0===e.errorcode&&void 0===e.message){if(t=e,i)try{t=i(e)}catch(e){_pio.handleError(s,r,e.code,e.message)}o&&o(t)}else _pio.handleError(s,r,e.errorcode,e.message)},a.onerror=function(e){_pio.handleError(s,r,PlayerIOErrorCode.GeneralError,"Error talking to webservice: "+JSON.stringify(e))}):_pio.handleError(s,r,PlayerIOErrorCode.GeneralError,"Need to implement flash calling")},_pio.runCallback=function(t,e,n){try{t&&t(e)}catch(e){t=(t="Unhandled error in callback: "+e.message)+"\nStack:\n"+(e.stack||e.stacktrace||e.StackTrace),n&&(t=t+"\nCallsite stack:\n"+(n.stack||n.stacktrace||n.StackTrace)),console.log(t)}},_pio.handleError=function(e,t,n,o){n=_pio.error(n,o),e&&(e.stack&&(n.stack=e.stack),e.stacktrace&&(n.stacktrace=e.stacktrace),e.StackTrace&&(n.StackTrace=e.StackTrace)),t?_pio.runCallback(t,n,e):"undefined"!=typeof console?console.log("No error callback specified for: "+n.code+": "+n.message+"\n"+(n.stack||n.stacktrace||n.StackTrace)):alert("No error callback specified for: "+n.code+": "+n.message+"\n"+(n.stack||n.stacktrace||n.StackTrace))},_pio.error=function(e,t){if(1==arguments.length&&(t=e,e=PlayerIOErrorCode.GeneralError),"number"==typeof e&&(e=PlayerIOErrorCode.codes[e]),"string"!=typeof e)throw console.log(e,t,Error().stack),"Code must be a string!";var n=Error();return new PlayerIOError(e,t,n.stack||n.stacktrace||n.StackTrace)},_pio.debugLog=function(e){"undefined"!=typeof console&&console.log(e)},_pio.convertToKVArray=function(e){var t=[];if(e)for(var n in e)t.push({key:""+n,value:""+e[n]});return t},_pio.convertFromKVArray=function(e){var t={};if(e&&e.length)for(var n in e)t[e[n].key]=e[n].value;return t},_pio.convertToSegmentArray=function(e){var t=[];if(e)for(var n in e)t.push(n+":"+e[n]);return t},PlayerIO={useSecureApiRequests:!1,authenticate:function(t,n,e,o,r,i){if("auto"==e.publishingnetworklogin)void 0===window.PublishingNetwork?i(new PlayerIOError(PlayerIOErrorCode.GeneralError,"Could not find the PublishingNetwork object on the current page. Did you include the PublishingNetwork.js script?")):PublishingNetwork.dialog("login",{gameId:t,connectionId:n,__use_usertoken__:!0},function(e){e.error?i(new PlayerIOError(PlayerIOErrorCode.GeneralError,e.error)):void 0===e.userToken?i(new PlayerIOError(PlayerIOErrorCode.GeneralError,"Missing userToken value in result, but no error message given.")):PlayerIO.authenticate(t,n,{userToken:e.userToken},o,r,i)});else{var a=new _pio.channel;a.authenticate(t,n,_pio.convertToKVArray(e),_pio.convertToSegmentArray(o),"javascript",_pio.convertToKVArray({}),null,r,i,function(e){return a.token=e.token,new _pio.client(a,t,e.gamefsredirectmap,e.userid)})}},quickConnect:null,gameFS:function(e){return new _pio.gameFS(e)}},JSON||(JSON={}),function(){function b(e){return e<10?"0"+e:e}function f(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=h[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function c(t,n){var o,r,i,a,s,u=e,p=n[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof l&&(p=l.call(n,t,p)),typeof p){case"string":return f(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(e+=g,s=[],"[object Array]"===Object.prototype.toString.apply(p)){for(a=p.length,o=0;o<a;o+=1)s[o]=c(o,p)||"null";return i=0===s.length?"[]":e?"[\n"+e+s.join(",\n"+e)+"\n"+u+"]":"["+s.join(",")+"]",e=u,i}if(l&&"object"==typeof l)for(a=l.length,o=0;o<a;o+=1)"string"==typeof l[o]&&((i=c(r=l[o],p))&&s.push(f(r)+(e?": ":":")+i));else for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(i=c(r,p))&&s.push(f(r)+(e?": ":":")+i);return i=0===s.length?"{}":e?"{\n"+e+s.join(",\n"+e)+"\n"+u+"}":"{"+s.join(",")+"}",e=u,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,g,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,n,o){var r;if(g=e="","number"==typeof o)for(r=0;r<o;r+=1)g+=" ";else"string"==typeof o&&(g=o);if((l=n)&&"function"!=typeof n&&("object"!=typeof n||"number"!=typeof n.length))throw Error("JSON.stringify");return c("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(a,c){function e(t,n){var o,r,i=t[n];if(i&&"object"==typeof i)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(void 0!==(r=e(i,o))?i[o]=r:delete i[o]);return c.call(t,n,i)}var g;if(a=String(a),d.lastIndex=0,d.test(a)&&(a=a.replace(d,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+a+")"),"function"==typeof c?e({"":g},""):g;throw new SyntaxError("JSON.parse")})}(),function(){function n(e){if(null!=o)e(o);else if(r)e(null);else if(null==i){i=[e];var n=setInterval(function(){var e=function(){var e;e=(e=(e='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="10" height="10" style="$style$" id="$id$">\t<param name="movie" value="$src$" />\t<param name="allowNetworking" value="all" />\t<param name="allowScriptAccess" value="always" />\t\x3c!--[if !IE]>--\x3e\t<object type="application/x-shockwave-flash" data="$src$" width="10" height="10" style="$style$">\t\t<param name="allowNetworking" value="all" />\t\t<param name="allowScriptAccess" value="always" />\t</object>\t\x3c!--<![endif]--\x3e</object>'.replace(/\$id\$/gi,"__pio_flashfallback__")).replace(/\$src\$/gi,"http://192.168.30.154/html5client/FlashFallback/bin-debug/FlashFallback.swf")).replace(/\$style\$/gi,"width:10px;height:10px");var t=document.getElementById("containerId");if(!t){var n=document.createElement("div");n.setAttribute("id",t),n.setAttribute("style","position:absolute;top:-20px;left:-20px"),n.innerHTML=e;try{document.body.appendChild(n)}catch(e){}}return(e=function(e){e=document.getElementsByTagName(e);for(var t=0;t!=e.length;t++)if(e[t].ping&&"pong"==e[t].ping())return e[t]})("embed")||e("object")}();null!=e&&t(e)},50);setTimeout(function(){null==o&&t(null)},3e4);var t=function(e){r=null==(o=e),clearInterval(n);for(var t=0;t!=i.length;t++)i[t](e)}}else i.push(e)}var p={},h=0;__pio_flashfallback_callback__=function(){var e=p[arguments[0]];if(e){for(var t=[],n=1;n!=arguments.length;n++)t[n-1]=arguments[n];e.apply(null,t)}},_pio.flashWebRequest=function(o,r){var i=this;this.response=null,this.onload=function(){},this.onerror=function(){},this.send=function(t){n(function(e){if(null==e)i.onerror("Browser does not support Cross-Origin (CORS) webrequest or Flash as a fallback method");else{var n="cb"+h++;p[n]=function(e,t){delete p[n],e?(i.response=t,i.onload()):i.onerror(t)},e.webrequest(n,o,r,t)}})}},_pio.flashSocketConnection=function(e,t,o,r,i){var a="cb"+h++,s=this,l=new _pio.messageSerializer,c=!1,u=!1,f=setTimeout(function(){c||o(!(c=!0),"Connect attempt timed out")},t);this.disconnect=function(){console.log("... this shouldn't happen")},this.sendMessage=function(e){console.log("... send msg. this shouldn't happen")},n(function(n){null==n?o(!(c=!0),"Browser does not support WebSocket connections and the Flash fallback failed."):(p[a]=function(e,t){switch(e){case"onopen":c||(clearTimeout(f),u=c=!0,n.socketSend(a,[0]),o(u));break;case"onclose":case"onerror":s.disconnect();break;case"onmessage":i(l.deserializeMessage(t,0,t.length))}},s.disconnect=function(){if(u){u=!1,r();try{n.socketClose(a)}catch(e){_pio.debugLog(e)}}},s.sendMessage=function(e){e=l.serializeMessage(e),n.socketSend(a,e)},n.socketConnection(a,e))})},_pio.isFlashFallbackEnabled=function(t){n(function(e){t(null!=e)})};var o=null,r=!1,i=null}(),function(){var e=_pio.channel.prototype;e.connect=function(e,t,n,o,r,i,a,s,l,c,u){this.call(10,{gameid:e,connectionid:t,userid:n,auth:o,partnerid:r,playerinsightsegments:i,clientapi:a,clientinfo:s},l,c,u)},_pio.ApiSecurityRule={RespectClientSetting:0,UseHttp:1,UseHttps:2},e.authenticate=function(e,t,n,o,r,i,a,s,l,c){this.call(13,{gameid:e,connectionid:t,authenticationarguments:n,playerinsightsegments:o,clientapi:r,clientinfo:i,playcodes:a},s,l,c)},e.createRoom=function(e,t,n,o,r,i,a,s){this.call(21,{roomid:e,roomtype:t,visible:n,roomdata:o,isdevroom:r},i,a,s)},e.joinRoom=function(e,t,n,o,r,i){this.call(24,{roomid:e,joindata:t,isdevroom:n},o,r,i)},e.createJoinRoom=function(e,t,n,o,r,i,a,s,l){this.call(27,{roomid:e,roomtype:t,visible:n,roomdata:o,joindata:r,isdevroom:i},a,s,l)},e.listRooms=function(e,t,n,o,r,i,a,s){this.call(30,{roomtype:e,searchcriteria:t,resultlimit:n,resultoffset:o,onlydevrooms:r},i,a,s)},e.userLeftRoom=function(e,t,n,o,r,i){this.call(40,{extendedroomid:e,newplayercount:t,closed:n},o,r,i)},e.writeError=function(e,t,n,o,r,i,a,s){this.call(50,{source:e,error:t,details:n,stacktrace:o,extradata:r},i,a,s)},e.updateRoom=function(e,t,n,o,r,i){this.call(53,{extendedroomid:e,visible:t,roomdata:n},o,r,i)},_pio.ValueType={String:0,Int:1,UInt:2,Long:3,Bool:4,Float:5,Double:6,ByteArray:7,DateTime:8,Array:9,Obj:10},e.createObjects=function(e,t,n,o,r){this.call(82,{objects:e,loadexisting:t},n,o,r)},e.loadObjects=function(e,t,n,o){this.call(85,{objectids:e},t,n,o)},_pio.LockType={NoLocks:0,LockIndividual:1,LockAll:2},e.saveObjectChanges=function(e,t,n,o,r,i){this.call(88,{locktype:e,changesets:t,createifmissing:n},o,r,i)},e.deleteObjects=function(e,t,n,o){this.call(91,{objectids:e},t,n,o)},e.loadMatchingObjects=function(e,t,n,o,r,i,a){this.call(94,{table:e,index:t,indexvalue:n,limit:o},r,i,a)},e.loadIndexRange=function(e,t,n,o,r,i,a,s){this.call(97,{table:e,index:t,startindexvalue:n,stopindexvalue:o,limit:r},i,a,s)},e.deleteIndexRange=function(e,t,n,o,r,i,a){this.call(100,{table:e,index:t,startindexvalue:n,stopindexvalue:o},r,i,a)},e.loadMyPlayerObject=function(e,t,n){this.call(103,{},e,t,n)},e.payVaultReadHistory=function(e,t,n,o,r,i){this.call(160,{page:e,pagesize:t,targetuserid:n},o,r,i)},e.payVaultRefresh=function(e,t,n,o,r){this.call(163,{lastversion:e,targetuserid:t},n,o,r)},e.payVaultConsume=function(e,t,n,o,r){this.call(166,{ids:e,targetuserid:t},n,o,r)},e.payVaultCredit=function(e,t,n,o,r,i){this.call(169,{amount:e,reason:t,targetuserid:n},o,r,i)},e.payVaultDebit=function(e,t,n,o,r,i){this.call(172,{amount:e,reason:t,targetuserid:n},o,r,i)},e.payVaultBuy=function(e,t,n,o,r,i){this.call(175,{items:e,storeitems:t,targetuserid:n},o,r,i)},e.payVaultGive=function(e,t,n,o,r){this.call(178,{items:e,targetuserid:t},n,o,r)},e.payVaultPaymentInfo=function(e,t,n,o,r,i){this.call(181,{provider:e,purchasearguments:t,items:n},o,r,i)},e.payVaultUsePaymentInfo=function(e,t,n,o,r){this.call(184,{provider:e,providerarguments:t},n,o,r)},e.partnerPayTrigger=function(e,t,n,o,r){this.call(200,{key:e,count:t},n,o,r)},e.partnerPaySetTag=function(e,t,n,o){this.call(203,{partnerid:e},t,n,o)},e.notificationsRefresh=function(e,t,n,o){this.call(213,{lastversion:e},t,n,o)},e.notificationsRegisterEndpoints=function(e,t,n,o,r){this.call(216,{lastversion:e,endpoints:t},n,o,r)},e.notificationsSend=function(e,t,n,o){this.call(219,{notifications:e},t,n,o)},e.notificationsToggleEndpoints=function(e,t,n,o,r,i){this.call(222,{lastversion:e,endpoints:t,enabled:n},o,r,i)},e.notificationsDeleteEndpoints=function(e,t,n,o,r){this.call(225,{lastversion:e,endpoints:t},n,o,r)},e.gameRequestsSend=function(e,t,n,o,r,i){this.call(241,{requesttype:e,requestdata:t,requestrecipients:n},o,r,i)},e.gameRequestsRefresh=function(e,t,n,o){this.call(244,{playcodes:e},t,n,o)},e.gameRequestsDelete=function(e,t,n,o){this.call(247,{requestids:e},t,n,o)},e.achievementsRefresh=function(e,t,n,o){this.call(271,{lastversion:e},t,n,o)},e.achievementsLoad=function(e,t,n,o){this.call(274,{userids:e},t,n,o)},e.achievementsProgressSet=function(e,t,n,o,r){this.call(277,{achievementid:e,progress:t},n,o,r)},e.achievementsProgressAdd=function(e,t,n,o,r){this.call(280,{achievementid:e,progressdelta:t},n,o,r)},e.achievementsProgressMax=function(e,t,n,o,r){this.call(283,{achievementid:e,progress:t},n,o,r)},e.achievementsProgressComplete=function(e,t,n,o){this.call(286,{achievementid:e},t,n,o)},e.playerInsightRefresh=function(e,t,n){this.call(301,{},e,t,n)},e.playerInsightSetSegments=function(e,t,n,o){this.call(304,{segments:e},t,n,o)},e.playerInsightTrackInvitedBy=function(e,t,n,o,r){this.call(307,{invitinguserid:e,invitationchannel:t},n,o,r)},e.playerInsightTrackEvents=function(e,t,n,o){this.call(311,{events:e},t,n,o)},e.playerInsightTrackExternalPayment=function(e,t,n,o,r){this.call(314,{currency:e,amount:t},n,o,r)},e.playerInsightSessionKeepAlive=function(e,t,n){this.call(317,{},e,t,n)},e.playerInsightSessionStop=function(e,t,n){this.call(320,{},e,t,n)},e.oneScoreLoad=function(e,t,n,o){this.call(351,{userids:e},t,n,o)},e.oneScoreSet=function(e,t,n,o){this.call(354,{score:e},t,n,o)},e.oneScoreAdd=function(e,t,n,o){this.call(357,{score:e},t,n,o)},e.oneScoreRefresh=function(e,t,n){this.call(360,{},e,t,n)},e.simpleConnect=function(e,t,n,o,r,i,a,s,l){this.call(400,{gameid:e,usernameoremail:t,password:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.simpleRegister=function(e,t,n,o,r,i,a,s,l,c,u,f,p,h){this.call(403,{gameid:e,username:t,password:n,email:o,captchakey:r,captchavalue:i,extradata:a,partnerid:s,playerinsightsegments:l,clientapi:c,clientinfo:u},f,p,h)},e.simpleRecoverPassword=function(e,t,n,o,r){this.call(406,{gameid:e,usernameoremail:t},n,o,r)},e.kongregateConnect=function(e,t,n,o,r,i,a,s,l){this.call(412,{gameid:e,userid:t,gameauthtoken:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.simpleGetCaptcha=function(e,t,n,o,r,i){this.call(415,{gameid:e,width:t,height:n},o,r,i)},e.facebookOAuthConnect=function(e,t,n,o,r,i,a,s,l){this.call(418,{gameid:e,accesstoken:t,partnerid:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.steamConnect=function(e,t,n,o,r,i,a,s,l){this.call(421,{gameid:e,steamappid:t,steamsessionticket:n,playerinsightsegments:o,clientapi:r,clientinfo:i},a,s,l)},e.simpleUserGetSecureLoginInfo=function(e,t,n){this.call(424,{},e,t,n)},e.joinCluster=function(e,t,n,o,r,i,a,s,l,c,u,f,p,h,d,g,y){this.call(504,{clusteraccesskey:e,isdevelopmentserver:t,ports:n,machinename:o,version:r,machineid:i,os:a,cpu:s,cpucores:l,cpulogicalcores:c,cpuaddresswidth:u,cpumaxclockspeed:f,rammegabytes:p,ramspeed:h},d,g,y)},e.serverHeartbeat=function(e,t,n,o,r,i,a,s,l,c,u,f,p,h,d,g,y,m,v,b){this.call(510,{serverid:e,appdomains:t,servertypes:n,machinecpu:o,processcpu:r,memoryusage:i,avaliablememory:a,freememory:s,runningrooms:l,usedresources:c,apirequests:u,apirequestserror:f,apirequestsfailed:p,apirequestsexecuting:h,apirequestsqueued:d,apirequeststime:g,serverunixtimeutc:y},m,v,b)},e.getGameAssemblyUrl=function(e,t,n,o,r,i){this.call(513,{clusteraccesskey:e,gamecodeid:t,machineid:n},o,r,i)},e.devServerLogin=function(e,t,n,o,r){this.call(524,{username:e,password:t},n,o,r)},e.webserviceOnlineTest=function(e,t,n){this.call(533,{},e,t,n)},e.getServerInfo=function(e,t,n,o){this.call(540,{machineid:e},t,n,o)},e.socialRefresh=function(e,t,n){this.call(601,{},e,t,n)},e.socialLoadProfiles=function(e,t,n,o){this.call(604,{userids:e},t,n,o)}}(),PlayerIOError=function(e,t,n){this.code=e,this.message=t,this.stack=n,this.stack||(n=Error(),this.stack=n.stack||n.stacktrace||n.StackTrace),this.toString=function(){return"PlayerIOError["+e+"]: "+t}},PlayerIOError.prototype=Error(),PlayerIOErrorCode={UnsupportedMethod:"UnsupportedMethod",GeneralError:"GeneralError",InternalError:"InternalError",AccessDenied:"AccessDenied",InvalidMessageFormat:"InvalidMessageFormat",MissingValue:"MissingValue",GameRequired:"GameRequired",ExternalError:"ExternalError",ArgumentOutOfRange:"ArgumentOutOfRange",GameDisabled:"GameDisabled",UnknownGame:"UnknownGame",UnknownConnection:"UnknownConnection",InvalidAuth:"InvalidAuth",NoServersAvailable:"NoServersAvailable",RoomDataTooLarge:"RoomDataTooLarge",RoomAlreadyExists:"RoomAlreadyExists",UnknownRoomType:"UnknownRoomType",UnknownRoom:"UnknownRoom",MissingRoomId:"MissingRoomId",RoomIsFull:"RoomIsFull",NotASearchColumn:"NotASearchColumn",QuickConnectMethodNotEnabled:"QuickConnectMethodNotEnabled",UnknownUser:"UnknownUser",InvalidPassword:"InvalidPassword",InvalidRegistrationData:"InvalidRegistrationData",InvalidBigDBKey:"InvalidBigDBKey",BigDBObjectTooLarge:"BigDBObjectTooLarge",BigDBObjectDoesNotExist:"BigDBObjectDoesNotExist",UnknownTable:"UnknownTable",UnknownIndex:"UnknownIndex",InvalidIndexValue:"InvalidIndexValue",NotObjectCreator:"NotObjectCreator",KeyAlreadyUsed:"KeyAlreadyUsed",StaleVersion:"StaleVersion",CircularReference:"CircularReference",HeartbeatFailed:"HeartbeatFailed",InvalidGameCode:"InvalidGameCode",VaultNotLoaded:"VaultNotLoaded",UnknownPayVaultProvider:"UnknownPayVaultProvider",DirectPurchaseNotSupportedByProvider:"DirectPurchaseNotSupportedByProvider",BuyingCoinsNotSupportedByProvider:"BuyingCoinsNotSupportedByProvider",NotEnoughCoins:"NotEnoughCoins",ItemNotInVault:"ItemNotInVault",InvalidPurchaseArguments:"InvalidPurchaseArguments",InvalidPayVaultProviderSetup:"InvalidPayVaultProviderSetup",UnknownPartnerPayAction:"UnknownPartnerPayAction",InvalidType:"InvalidType",IndexOutOfBounds:"IndexOutOfBounds",InvalidIdentifier:"InvalidIdentifier",InvalidArgument:"InvalidArgument",LoggedOut:"LoggedOut",InvalidSegment:"InvalidSegment",GameRequestsNotLoaded:"GameRequestsNotLoaded",AchievementsNotLoaded:"AchievementsNotLoaded",UnknownAchievement:"UnknownAchievement",NotificationsNotLoaded:"NotificationsNotLoaded",InvalidNotificationsEndpoint:"InvalidNotificationsEndpoint",NetworkIssue:"NetworkIssue",OneScoreNotLoaded:"OneScoreNotLoaded",PublishingNetworkNotAvailable:"PublishingNetworkNotAvailable",PublishingNetworkNotLoaded:"PublishingNetworkNotLoaded",DialogClosed:"DialogClosed",AdTrackCheckCookie:"AdTrackCheckCookie",codes:{0:"UnsupportedMethod",1:"GeneralError",2:"InternalError",3:"AccessDenied",4:"InvalidMessageFormat",5:"MissingValue",6:"GameRequired",7:"ExternalError",8:"ArgumentOutOfRange",9:"GameDisabled",10:"UnknownGame",11:"UnknownConnection",12:"InvalidAuth",13:"NoServersAvailable",14:"RoomDataTooLarge",15:"RoomAlreadyExists",16:"UnknownRoomType",17:"UnknownRoom",18:"MissingRoomId",19:"RoomIsFull",20:"NotASearchColumn",21:"QuickConnectMethodNotEnabled",22:"UnknownUser",23:"InvalidPassword",24:"InvalidRegistrationData",25:"InvalidBigDBKey",26:"BigDBObjectTooLarge",27:"BigDBObjectDoesNotExist",28:"UnknownTable",29:"UnknownIndex",30:"InvalidIndexValue",31:"NotObjectCreator",32:"KeyAlreadyUsed",33:"StaleVersion",34:"CircularReference",40:"HeartbeatFailed",41:"InvalidGameCode",50:"VaultNotLoaded",51:"UnknownPayVaultProvider",52:"DirectPurchaseNotSupportedByProvider",54:"BuyingCoinsNotSupportedByProvider",55:"NotEnoughCoins",56:"ItemNotInVault",57:"InvalidPurchaseArguments",58:"InvalidPayVaultProviderSetup",70:"UnknownPartnerPayAction",80:"InvalidType",81:"IndexOutOfBounds",82:"InvalidIdentifier",83:"InvalidArgument",84:"LoggedOut",90:"InvalidSegment",100:"GameRequestsNotLoaded",110:"AchievementsNotLoaded",111:"UnknownAchievement",120:"NotificationsNotLoaded",121:"InvalidNotificationsEndpoint",130:"NetworkIssue",131:"OneScoreNotLoaded",200:"PublishingNetworkNotAvailable",201:"PublishingNetworkNotLoaded",301:"DialogClosed",302:"AdTrackCheckCookie"}},_pio.client=function(e,t,n,o){this.connectUserId=o,this.gameId=t,this.gameFS=new _pio.gameFS(t,n),this.errorLog=new _pio.errorLog(e),this.payVault=new _pio.payVault(e),this.bigDB=new _pio.bigDB(e),this.multiplayer=new _pio.multiplayer(e),this.gameRequests=new _pio.gameRequests(e),this.achievements=new _pio.achievements(e),this.playerInsight=new _pio.playerInsight(e),this.oneScore=new _pio.oneScore(e),this.notifications=new _pio.notifications(e),this.publishingNetwork=new _pio.publishingNetwork(e,this.connectUserId)},function(){var a={};_pio.gameFS=function(o,e){if("string"==typeof e&&0<e.length){var t=(e||"").split("|");if(1<=t.length)for(var n=a[o.toLowerCase()]={},r=0;r!=t.length;r++){var i=t[r];"alltoredirect"==i||"cdnmap"==i?n.baseUrl=t[r+1]:"alltoredirectsecure"==i||"cdnmapsecure"==i?n.secureBaseUrl=t[r+1]:n["."+i]=t[r+1]}}this.getUrl=function(e,t){if("/"==!e[0])throw _pio.error("The path given to getUrl must start with a slash, like: '/myfile.swf' or '/folder/file.jpg'");var n=a[o];return n?(t?n.secureBaseUrl:n.baseUrl)+(n["."+e]||e):(t?"https":"http")+"://r.playerio.com/r/"+o+e}}}(),_pio.gameRequests=function(a){function s(e){if(null==e||0==e.length)return[];for(var t=[],n=0;n!=e.length;n++){var o=e[n];t.push(new _pio.gameRequest(o.id,o.type,o.senderuserid,o.created,o.data))}return t}var n=[];this.waitingRequests="[ERROR: You tried to access gameRequests.waitingRequests before loading waiting requests. You have to call the refresh method first.]";var l=this;this.send=function(e,t,n,o,r){a.gameRequestsSend(e,_pio.convertToKVArray(t),n,o,r,function(e){})},this.refresh=function(e,t){a.gameRequestsRefresh(n,e,t,function(e){l._playCodes=e.newplaycodes,l.waitingRequests=s(e.requests)})},this.delete=function(e,t,n){if("object"==typeof e||e.length){for(var o=[],r=0;r!=e.length;r++){var i=e[r].id;if(!i)return e=_pio.error("No GameRequest id found on item#"+r+". You have to use requests from the gameRequests.waitingRequests array. For instance: client.gameRequests.delete(client.gameRequests.waitingRequests, ...)"),void _pio.handleError(e,n,e.code,e.message);o.push(i)}a.gameRequestsDelete(o,t,n,function(e){l.waitingRequests=s(e.requests)})}else e=_pio.error("The first argument to delete should be an array: client.gameRequests.delete([requests], ...)"),_pio.handleError(e,n,e.code,e.message)}},_pio.gameRequest=function(e,t,n,o,r){this.id=e,this.type=t,this.senderUserId=n,this.created=new Date(o),this.data=_pio.convertFromKVArray(r)},_pio.errorLog=function(r){this.writeError=function(e,t,n,o){r.writeError("Javascript",e,t,n,_pio.convertToKVArray(o))}},_pio.quickConnect=function(){this.simpleGetCaptcha=function(e,t,n,o,r){(new _pio.channel).simpleGetCaptcha(e,t,n,o,r,function(e){return new _pio.simpleGetCaptchaOutput(e.captchakey,e.captchaimageurl)})},this.simpleRecoverPassword=function(e,t,n,o){(new _pio.channel).simpleRecoverPassword(e,t,n,o,function(e){})}},_pio.simpleGetCaptchaOutput=function(e,t){this.captchaKey=e,this.captchaImageUrl=t},PlayerIO.quickConnect=new _pio.quickConnect,_pio.payVault=function(a){function s(e){if(null!=e&&(r=e.version,i.coins=e.coins||0,i.items=[],e.items&&e.items.length))for(var t=0;t!=e.items.length;t++){var n=e.items[t],o=i.items[t]=new _pio.vaultItem(n.id,n.itemkey,(new Date).setTime(n.purchasedate));_pio.bigDBDeserialize(n.properties,o,!0)}}var r=null;this.coins="[ERROR: you tried to access payVault.coins before the vault was loaded. You have to refresh the vault before the .coins property is set to the right value]",this.items="[ERROR: you tried to access payVault.items before the vault was loaded. You have to refresh the vault before the .items property is set to the right value]",this.has=function(e){if(null==r)throw new PlayerIOError(PlayerIOErrorCode.VaultNotLoaded,"Cannot access items before vault has been loaded. Please refresh the vault first");for(var t=0;t!=this.items.length;t++)if(this.items[t].itemKey==e)return!0;return!1},this.first=function(e){if(null==r)throw new PlayerIOError(PlayerIOErrorCode.VaultNotLoaded,"Cannot access items before vault has been loaded. Please refresh the vault first");for(var t=0;t!=this.items.length;t++)if(this.items[t].itemKey==e)return this.items[t];return null},this.count=function(e){if(null==r)throw new PlayerIOError(PlayerIOErrorCode.VaultNotLoaded,"Cannot access items before vault has been loaded. Please refresh the vault first");for(var t=0,n=0;n!=this.items.length;n++)this.items[n].itemKey==e&&t++;return t},this.refresh=function(e,t){a.payVaultRefresh(r,null,e,t,function(e){s(e.vaultcontents)})},this.readHistory=function(e,t,n,o){a.payVaultReadHistory(e,t,null,n,o,function(e){for(var t=[],n=0;n!=e.entries.length;n++){var o=e.entries[n];t.push(new _pio.payVaultHistoryEntry(o.type,o.amount,o.timestamp,o.itemkeys||[],o.reason,o.providertransactionid,o.providerprice))}return t})},this.credit=function(e,t,n,o){a.payVaultCredit(e,t,null,n,o,function(e){s(e.vaultcontents)})},this.debit=function(e,t,n,o){a.payVaultDebit(e,t,null,n,o,function(e){s(e.vaultcontents)})},this.consume=function(e,t,n){if("object"==typeof e||e.length){for(var o=[],r=0;r!=e.length;r++){var i=e[r].id;if(!i)return e=_pio.error("No PayVault item id found on item#"+r+". You have to use items from the payVault.items array. For instance: client.payVault.consume([client.payVault.first('sportscar')], ...)"),void _pio.handleError(e,n,e.code,e.message);o.push(i)}a.payVaultConsume(o,null,t,n,function(e){s(e.vaultcontents)})}else e=_pio.error("The first argument to consume should be an array: client.payVault.consume([item], ...)"),_pio.handleError(e,n,e.code,e.message)},this.buy=function(e,t,n,o){a.payVaultBuy(_pio.convertBuyItems(e),t,null,n,o,function(e){s(e.vaultcontents)})},this.give=function(e,t,n){a.payVaultGive(_pio.convertBuyItems(e),null,t,n,function(e){s(e.vaultcontents)})},this.getBuyCoinsInfo=function(e,t,n,o){a.payVaultPaymentInfo(e,_pio.convertToKVArray(t),null,n,o,function(e){return _pio.convertFromKVArray(e.providerarguments)})},this.getBuyDirectInfo=function(e,t,n,o,r){a.payVaultPaymentInfo(e,_pio.convertToKVArray(t),_pio.convertBuyItems(n),o,r,function(e){return _pio.convertFromKVArray(e.providerarguments)})};var i=this},_pio.convertBuyItems=function(e){if(null==e)return[];for(var t=[],n=0;n!=e.length;n++){var o=e[n].itemkey;if(!o)throw _pio.error("You have to specify an itemkey for the payvault item. Example:  {itemkey:'car'}");t.push({itemkey:o,payload:_pio.compareForChanges({itemkey:o},e[n],!0,!0)})}return t},_pio.vaultItem=function(e,t,n){this.id=e,this.itemKey=t,this.purchaseDate=n},_pio.payVaultHistoryEntry=function(e,t,n,o,r,i,a){this.type=e,this.amount=t,this.timestamp=(new Date).setTime(n),this.itemKeys=o,this.reason=r,this.providerTransactionId=i,this.providerPrice=a},_pio.bigDB=function(u){function f(){for(var e=0;e<p.length;e++){var t,n=p[e],o=!0;for(t in n.objects)if(n.objects[t]._internal_("get-is-saving")){o=!1;break}if(o){for(t in n.objects)for(o=e+1;o<p.length;o++){futureSave=p[o];for(var r=0;r<futureSave.objects.length;r++)futureSave.objects[r]==n.objects[t]&&futureSave.fullOverwrite==n.fullOverwrite&&futureSave.useOptimisticLock==n.useOptimisticLock&&(n.changesets[t]=futureSave.changesets[r],n.futureSaves.push(futureSave))}p.splice(e,1),e--,n.execute()}}}function l(e,t){null==e?e=[]:e instanceof Array||(e=[e]),null!=t&&(e=e.concat([t]));for(var n=[],o=0;o!=e.length;o++){var r=e[o];switch(typeof r){case"boolean":n.push({valuetype:_pio.ValueType.Bool,bool:r});break;case"string":n.push({valuetype:_pio.ValueType.String,string:r});break;case"number":0!=r%1?n.push({valuetype:_pio.ValueType.Double,double:r}):-2147483648<r&&r<2147483647?n.push({valuetype:_pio.ValueType.Int,int:r}):0<r&&r<4294967295?n.push({valuetype:_pio.ValueType.UInt,uint:r}):n.push({valuetype:_pio.ValueType.Long,long:r});break;case"object":if(!r.getTime||!r.getMilliseconds)throw Error("Don't know how to serialize type '"+typeof r+"' for BigDB");n.push({valuetype:_pio.ValueType.DateTime,datetime:r.getTime()});break;default:throw Error("Don't know how to serialize type '"+typeof r+"' for BigDB")}}return n}var c=this,p=[];this.createObject=function(t,e,n,o,r){var i=_pio.compareForChanges({},n||{},!0,!0);u.createObjects([{key:e,table:t,properties:i}],!1,o,r,function(e){if(1==e.objects.length)return new _pio.databaseobject(c,t,e.objects[0].key,e.objects[0].version,!1,i);throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"Error creating object")})},this.loadMyPlayerObject=function(e,t){u.loadMyPlayerObject(e,t,function(e){return new _pio.databaseobject(c,"PlayerObjects",e.playerobject.key,e.playerobject.version,!0,e.playerobject.properties)})},this.load=function(t,e,n,o){u.loadObjects([{table:t,keys:[e]}],n,o,function(e){if(1==e.objects.length)return null==e.objects[0]?null:new _pio.databaseobject(c,t,e.objects[0].key,e.objects[0].version,!1,e.objects[0].properties);throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"Error loading object")})},this.loadKeys=function(r,e,t,n){u.loadObjects([{table:r,keys:e}],t,n,function(e){for(var t=[],n=0;n!=e.objects.length;n++){var o=e.objects[n];t[n]=null==o?null:new _pio.databaseobject(c,r,o.key,o.version,!1,o.properties)}return t})},this.loadOrCreate=function(t,e,n,o){u.createObjects([{key:e,table:t,properties:[]}],!0,n,o,function(e){if(1==e.objects.length)return new _pio.databaseobject(c,t,e.objects[0].key,e.objects[0].version,!1,e.objects[0].properties);throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"Error creating object")})},this.deleteKeys=function(e,t,n,o){u.deleteObjects([{table:e,keys:t}],n,o,function(e){return null})},this.loadKeysOrCreate=function(r,e,t,n){for(var o=[],i=0;i!=e.length;i++)o.push({key:e[i],table:r,properties:[]});u.createObjects(o,!0,t,n,function(e){for(var t=[],n=0;n!=e.objects.length;n++){var o=e.objects[n];t[n]=new _pio.databaseobject(c,r,o.key,o.version,!1,o.properties)}return t})},this.loadSingle=function(t,e,n,o,r){u.loadMatchingObjects(t,e,l(n),1,o,r,function(e){return 0==e.objects.length?null:new _pio.databaseobject(c,t,e.objects[0].key,e.objects[0].version,!1,e.objects[0].properties)})},this.loadRange=function(r,e,t,n,o,i,a,s){u.loadIndexRange(r,e,l(t,n),l(t,o),i,a,s,function(e){for(var t=[],n=0;n!=e.objects.length;n++){var o=e.objects[n];t[n]=null==o?null:new _pio.databaseobject(c,r,o.key,o.version,!1,o.properties)}return t})},this.deleteRange=function(e,t,n,o,r,i,a){u.deleteIndexRange(e,t,l(n,o),l(n,r),i,a,function(){})},this.saveChanges=function(e,t,n,o,r,i){var s=1==i;for(var a in i=[],n){var l=n[a];if(!(l.existsInDatabase&&l.key&&l.table&&l._internal_&&l.save))return e=_pio.error("You can only save database objects that exist in the database"),void _pio.handleError(e,r,e.code,e.message);var c=_pio.compareForChanges(t?{}:l._internal_("get-dbCurrent"),l,!0,!0);(t||0<c.length)&&i.push({key:l._internal_("get-key"),table:l._internal_("get-table"),fulloverwrite:t,onlyifversion:e?l._internal_("get-version"):null,changes:c})}p.push({objects:n,changesets:i,fullOverwrite:t,useOptimisticLock:e,futureSaves:[],setIsSavingOnAll:function(e){for(var t=0;t!=this.objects.length;t++)this.objects[t]._internal_("set-is-saving",e)},done:function(){this.setIsSavingOnAll(!1),f()},execute:function(){var a=this;a.setIsSavingOnAll(!0),0<a.changesets.length?u.saveObjectChanges(_pio.LockType.LockAll,a.changesets,s,o,function(e){a.done(),_pio.handleError(e,r,e.code,e.message)},function(e){for(var t=0;t!=a.objects.length;t++){var n=a.objects[t];n._internal_("set-version",e.versions[t]),n._internal_("change-dbCurrent",a.changesets[t].changes);for(var o=0;o!=a.futureSaves.length;o++)for(var r=a.futureSaves[o],i=0;i<r.objects.length;i++)r.objects[i]==n&&(r.changesets.splice(i,1),r.objects.splice(i,1),i--)}a.done()}):(a.done(),setTimeout(o,1))}}),f()}},_pio.databaseobject=function(r,n,o,i,a,e){var s={},l=!1;_pio.bigDBDeserialize(e,s,!0),this.table=n,this.key=o,this.existsInDatabase=!0,this.save=function(e,t,n,o){r.saveChanges(e,t,[this],n,o,a)},this._internal_=function(e,t){switch(e){case"get-table":return n;case"get-key":return o;case"set-is-saving":l=t;case"get-is-saving":return l;case"get-version":return i;case"set-version":i=t;case"get-dbCurrent":return s;case"change-dbCurrent":_pio.bigDBDeserialize(t,s,!0)}},_pio.bigDBDeserialize(e,this,!0)},_pio.compareForChanges=function(e,t,n,o){var r,i=[];for(r in t){var a=t[r],s=e?e[r]:null;switch(r){case"table":if(o)continue;case"key":if(o)continue;case"save":if(o)continue;case"existsInDatabase":if(o)continue;case"_internal_":if(o)continue;case"_circular_reference_finder_":continue}if(null!=a){var l=n?{name:r}:{index:parseInt(r)};switch(typeof a){case"boolean":a!=s&&(l.value={valuetype:_pio.ValueType.Bool,bool:a},i.push(l));break;case"number":a!=s&&(isFinite(a)&&Math.floor(a)===a?l.value=-2147483648<=a&&a<=2147483647?{valuetype:_pio.ValueType.Int,int:a}:0<a&&a<=4294967295?{valuetype:_pio.ValueType.UInt,uint:a}:-0x7ffffffffffffc00<=a&&a<=0x7ffffffffffffc00?{valuetype:_pio.ValueType.Long,long:a}:0<a&&a<=0xfffffffffffff800?{valuetype:_pio.ValueType.ULong,ulong:a}:{valuetype:_pio.ValueType.Double,double:a}:l.value={valuetype:_pio.ValueType.Double,double:a},i.push(l));break;case"string":a!=s&&(l.value={valuetype:_pio.ValueType.String,string:a},i.push(l));break;case"object":if(a.getTime&&a.getMilliseconds)a+""!=s+""&&(l.value={valuetype:_pio.ValueType.DateTime,datetime:a.getTime()},i.push(l));else{if(a._circular_reference_finder_)throw new PlayerIOError(PlayerIOErrorCode.CircularReference,"The object you're trying to save contains a circular reference for "+(n?"a property named":"the array entry")+"): "+r);a._circular_reference_finder_=!0;var c=a instanceof Array;if(c&&a.bytearray){for(c=Array(a.length),s=0;s!=c.length;s++){var u=a[s];if(!(0<=u&&u<=255))throw new PlayerIOError(PlayerIOErrorCode.GeneralError,"The bytearray property '"+r+"' was supposed to only contain byte (0-255) values, but contained the value: "+u);c[s]=u}l.value={valuetype:_pio.ValueType.ByteArray,bytearray:c}}else s=_pio.compareForChanges(s,a,!c,!1),l.value=c?{valuetype:_pio.ValueType.Array,arrayproperties:s}:{valuetype:_pio.ValueType.Obj,objectproperties:s};i.push(l),delete a._circular_reference_finder_}break;case"undefined":case"function":break;default:throw Error("Don't know how to serialize type '"+typeof a+"' for BigDB")}}}for(r in e)null!=t[r]&&void 0!==t[r]||i.push(n?{name:r}:{index:parseInt(r)});return i},_pio.bigDBDeserialize=function(e,t,n){for(var o in e){var r=e[o],i=n?r.name:r.index||0;if(r=r.value)switch(r.valuetype||0){case _pio.ValueType.String:t[i]=r.string||"";break;case _pio.ValueType.Int:t[i]=r.int||0;break;case _pio.ValueType.UInt:t[i]=r.uint||0;break;case _pio.ValueType.Long:t[i]=r.long||0;break;case _pio.ValueType.Bool:t[i]=r.bool||0;break;case _pio.ValueType.Float:t[i]=r.float||0;break;case _pio.ValueType.Double:t[i]=r.double||0;break;case _pio.ValueType.ByteArray:t[i]=r.bytearray,t[i].bytearray=!0;break;case _pio.ValueType.DateTime:t[i]=new Date(r.datetime||0);break;case _pio.ValueType.Array:var a=t[i]instanceof Array?t[i]:[];_pio.bigDBDeserialize(r.arrayproperties,a,!1),t[i]=a;break;case _pio.ValueType.Obj:a="object"==typeof t[i]?t[i]:{},_pio.bigDBDeserialize(r.objectproperties,a,!0),t[i]=a}else delete t[i]}},function(){_pio.multiplayer=function(l){var c=this;this.developmentServer=null,this.useSecureConnections=!1,this.createRoom=function(e,t,n,o,r,i){l.createRoom(e,t,n,_pio.convertToKVArray(o),null!=c.developmentServer,r,i,function(e){return e.roomid})},this.joinRoom=function(e,t,n,o){clearTimeout(setTimeout(function(){n(new _pio.connection)},1e4));var r=Error();l.joinRoom(e,_pio.convertToKVArray(t),null!=c.developmentServer,function(){},o,function(e){return new _pio.connection(r,c.developmentServer,c.useSecureConnections,e.endpoints,e.joinkey,t||{},n,o)})},this.createJoinRoom=function(e,t,n,o,r,i,a){clearTimeout(setTimeout(function(){i(new _pio.connection)},1e4));var s=Error();l.createJoinRoom(e,t,n,_pio.convertToKVArray(o),_pio.convertToKVArray(r),null!=c.developmentServer,function(){},a,function(e){return new _pio.connection(s,c.developmentServer,c.useSecureConnections,e.endpoints,e.joinkey,r||{},i,a)})},this.listRooms=function(e,t,n,o,r,i){l.listRooms(e,_pio.convertToKVArray(t),n,o,null!=c.developmentServer,r,i,function(e){var t=[];if(e.rooms&&0<e.rooms.length)for(var n=0;n!=e.rooms.length;n++){var o=e.rooms[n];t.push(new _pio.roomInfo(o.id,o.roomtype,o.onlineusers,_pio.convertFromKVArray(o.roomdata)))}return t})}},_pio.websocketConnection=function(r,e,t,n,o,i,a){var s=this,l=!1,c=new _pio.messageSerializer,u=!1,f=null;e=(e?"wss://":"ws://")+t+"/";try{f="undefined"!=typeof MozWebSocket?new MozWebSocket(e):new WebSocket(e)}catch(e){return void o(!1,""+e)}var p=setTimeout(function(){l||o(!(l=!0),"Connect attempt timed out")},n);f.onopen=function(){l||(clearTimeout(p),u=l=!0,o(u))},f.onclose=function(e){s.disconnect()},f.onerror=function(e){s.disconnect()},f.onmessage=function(e){if(u)if(r){var o=new FileReader;o.onloadend=function(){for(var e=new Uint8Array(o.result),t=Array(e.length),n=0;n!=e.length;n++)t[n]=e[n];a(c.deserializeMessage(t,0,t.length))},o.readAsArrayBuffer(e.data)}else e=_pio.base64decode(e.data),a(c.deserializeMessage(e,0,e.length))},this.disconnect=function(){if(u){u=!1,i();try{f.close()}catch(e){_pio.debugLog(e)}}},this.sendMessage=function(e){if(e=c.serializeMessage(e),r){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e[n];f.send(t.buffer)}else e=_pio.base64encode(e),f.send(e)}},_pio.connection=function(o,r,l,i,c,u,f,p){function t(e){function t(e,t){var n=a[e];if(n)for(var o=0;o<n.length;o++)_pio.runCallback(n[o].callback,t,n[o].stackSource)}var s=[];if(r)s.push(r);else for(var n=0;n!=i.length;n++)s.push(i[n].address+":"+i[n].port);!function r(){if(0<s.length){var i=s[0];s.splice(0,1);var a=e(l,i,4e3,function(e,t){if(e){y=a,h.connected=!0;var n=h.createMessage("join");if(n.addString(c),null!=u)for(var o in u)n.addString(o),n.addString(""+u[o]);h.sendMessage(n)}else _pio.debugLog("Unable to connect to endpoint: "+i+'. reason: "'+t+(0<s.length?'". Trying next endpoint.':'". No more endpoints to try.')),r()},function(e){h.connected&&(h.connected=!1,setTimeout(function(){for(var e=0;e!=g.length;e++)_pio.runCallback(g[e].callback,h,g[e].stackSource)},100))},function(e){d?"playerio.joinresult"==e.type?(d=!1,e.getBoolean(0)?_pio.runCallback(f,h,null):_pio.handleError(o,p,e.getInt(1),e.getString(2))):_pio.handleError(o,p,PlayerIOErrorCode.GeneralError,"The expected inital messagetype is: playerio.joinresult, received: "+joinResult.getType()):(t(e.type,e),t("*",e))})}else _pio.handleError(o,p,PlayerIOErrorCode.GeneralError,"Could not establish a socket connection to any of the given endpoints for the room")}()}var h=this,d=!0,g=[],a={},n=[],y=null,e=(s=/(WebKit|Firefox|Trident)\/([0-9]+)/gi.exec(navigator.userAgent))&&3<=s.length?s[1]:null,s=s&&3<=s.length?parseInt(s[2]):null;window.FileReader&&"WebKit"==e&&535<=s||"Firefox"==e&&11<=s||"Trident"==e&&6<=s?t(function(e,t,n,o,r,i){return new _pio.websocketConnection(!0,e,t,n,o,r,i)}):_pio.isFlashFallbackEnabled(function(e){t(e?function(e,t,n,o,r,i){return new _pio.flashSocketConnection(t,n,o,r,i)}:function(e,t,n,o,r,i){return new _pio.websocketConnection(!1,e,t,n,o,r,i)})}),this.connected=!1,this.addDisconnectCallback=function(e){g.push({callback:e,stackSourc:Error()})},this.addMessageCallback=function(e,t){null==e&&(e="*");var n=a[e];n||(a[e]=n=[]),n.push({callback:t,stackSource:Error()})},this.removeDisconnectCallback=function(e){for(var t=0;t<g.length;t++)g[t].callback==e&&(g.splice(t,1),t--)},this.removeMessageCallback=function(e){for(var t in a)for(var n=a[t],o=0;o<n.length;o++)n[o].callback==e&&(n.splice(o,1),o--)},this.createMessage=function(e){for(var t=new _pio.message(e),n=1;n<arguments.length;n++)t.add(arguments[n]);return t},this.send=function(e){var t=this.createMessage.apply(this,arguments);this.sendMessage(t)},this.sendMessage=function(e){h.connected?y.sendMessage(e):n.push(e)},this.disconnect=function(){h.connected&&y.disconnect()}},_pio.message=function(e){function t(e,t,n,o){if(!e)throw _pio.error("The given value ("+t+") is not "+o);s.push(t),a.push(n),i.length=s.length}function n(e,t){if(e>s.length)throw _pio.error("this message ("+i.type+") only has "+s.length+" entries");if(a[e]==t)return s[e];throw _pio.error("Value at index:"+e+" is a "+o(a[e])+" and not a "+o(t)+" as requested. The value is: "+s[e])}function o(e){return{0:"Integer",1:"Unsigned Integer",2:"Long",3:"Unsigned Long",4:"Double",5:"Float",6:"String",7:"ByteArray",8:"Boolean"}[e]}function r(e){var t="object"==typeof e&&void 0!==e.length;if(t)for(var n=0;n!=e.length;n++)if(255<e[n]||e[n]<0){t=!1;break}return t}var i=this,a=[],s=[];this.type=e,this.length=0,this.add=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];switch(typeof t){case"string":i.addString(t);break;case"boolean":i.addBoolean(t);break;case"number":if(isFinite(t)&&Math.floor(t)===t){if(-2147483648<=t&&t<=2147483647){i.addInt(t);break}if(0<t&&t<=4294967295){i.addUInt(t);break}if(-0x7ffffffffffffc00<=t&&t<=0x7ffffffffffffc00){i.addLong(t);break}if(0<t&&t<=0xfffffffffffff800){i.addULong(t);break}}i.addDouble(t);break;case"object":if(r(t)){this.addByteArray(t);break}default:throw _pio.error("The type of the value ("+t+") cannot be inferred")}}},this.addInt=function(e){t(-2147483648<=e&&e<=2147483647,Math.trunc(e),0,"an integer (32bit)")},this.addUInt=function(e){t(0<=e&&e<=4294967295,Math.trunc(e),1,"an unsigned integer (32bit)")},this.addLong=function(e){t(-0x7ffffffffffffc00<=e&&e<=0x7ffffffffffffc00,Math.trunc(e),2,"a long (64bit)")},this.addULong=function(e){t(0<=e&&e<=0xfffffffffffff800,e,3,"an unsigned long (64bit)")},this.addBoolean=function(e){t(!0,!!e,8,"a boolean value")},this.addFloat=function(e){t(!0,Number(e),5,"a floating point value (32bit)")},this.addDouble=function(e){t(!0,Number(e),4,"a double floating point value (64bit)")},this.addByteArray=function(e){t(r(e),e,7,"a bytearray")},this.addString=function(e){t(!0,e+"",6,"a string")},this.getInt=function(e){return n(e,0)},this.getUInt=function(e){return n(e,1)},this.getLong=function(e){return n(e,2)},this.getULong=function(e){return n(e,3)},this.getBoolean=function(e){return n(e,8)},this.getDouble=function(e){return n(e,4)},this.getFloat=function(e){return n(e,5)},this.getByteArray=function(e){return n(e,7)},this.getString=function(e){return n(e,6)},this.toString=function(){for(var e="msg.Type = "+this.type,t=0;t!=this.length;t++)e+=", msg["+t+"] = "+s[t]+" ("+o(a[t])+")";return e},this._internal_=function(e,t){switch(e){case"get-objects":return s;case"get-types":return a}}},_pio.roomInfo=function(e,t,n,o){this.id=e,this.roomType=t,this.onlineUsers=n,this.roomData=o},_pio.byteWriter=function(){this.bytes=[],this.writeByte=function(e){if(!(0<=e&&e<=255))throw Error("This is not a byte value: "+e);this.bytes.push(e)},this.writeBytes=function(e){for(var t=0;t!=e.length;t++)this.writeByte(e[t])},this.writeTagWithLength=function(e,t,n){63<e||e<0?this.writeBottomPatternAndBytes(n,_pio.binaryserializer.bytesFromInt(e)):this.writeByte(t|e)},this.writeBottomPatternAndBytes=function(e,t){var n=0;for(0!=t[0]?n=3:0!=t[1]?n=2:0!=t[2]&&(n=1),this.writeByte(e|n),n=t.length-n-1;n!=t.length;n++)this.writeByte(t[n])},this.writeLongPattern=function(e,t,n){for(var o=0,r=0;7!=r;r++)if(0!=n[r]){o=7-r;break}for(3<o?this.writeByte(t|o-4):this.writeByte(e|o),r=n.length-o-1;r!=n.length;r++)this.writeByte(n[r])}},_pio.messageSerializer=function(){this.serializeMessage=function(e){var t=new _pio.byteWriter;t.writeTagWithLength(e.length,128,4);var n=_pio.binaryserializer.bytesFromString(e.type);t.writeTagWithLength(n.length,192,12),t.writeBytes(n);for(var o=0;o!=e.length;o++)switch(n=e._internal_("get-objects")[o],e._internal_("get-types")[o]){case 6:n=_pio.binaryserializer.bytesFromString(n),t.writeTagWithLength(n.length,192,12),t.writeBytes(n);break;case 0:t.writeTagWithLength(n,128,4);break;case 1:t.writeBottomPatternAndBytes(8,_pio.binaryserializer.bytesFromUInt(n));break;case 2:t.writeLongPattern(48,52,_pio.binaryserializer.bytesFromLong(n));break;case 3:t.writeLongPattern(56,60,_pio.binaryserializer.bytesFromULong(n));break;case 7:t.writeTagWithLength(n.length,64,16),t.writeBytes(n);break;case 4:t.writeByte(3),t.writeBytes(_pio.binaryserializer.bytesFromDouble(n));break;case 5:t.writeByte(2),n=_pio.binaryserializer.bytesFromFloat(n),t.writeBytes(n);break;case 8:t.writeByte(n?1:0)}return t.bytes},this.deserializeMessage=function(e,t,n){var o=t;t+=n,n=null;for(var r=0;o<t;){var i=0,a=0,s=e[o];o++;var l=192&s;switch(0==l&&(0==(l=60&s)&&(l=s)),l){case 12:case 16:if(t<o+(i=1+(3&s)))throw Error("Unexpected: Unfinished message");s=i,i=_pio.binaryserializer.intFromBytes(e,o,i),o+=s;break;case 192:i=63&s;break;case 128:a=63&s;break;case 64:i=63&s;break;case 4:case 8:case 48:case 56:i=1+(3&s);break;case 52:case 60:i=5+(3&s);break;case 3:i=8;break;case 2:i=4}if(t<o+i)throw Error("Unexpected: Unfinished message");switch(l){case 12:case 192:null==n?(n=new _pio.message(_pio.binaryserializer.stringFromBytes(e,o,i)),r++):n.addString(_pio.binaryserializer.stringFromBytes(e,o,i));break;case 4:a=_pio.binaryserializer.intFromBytes(e,o,i);case 128:0==r?r=a:n.addInt(a);break;case 16:case 64:n.addByteArray(e.slice(o,o+i));break;case 8:n.addUInt(_pio.binaryserializer.uintFromBytes(e,o,i));break;case 48:case 52:n.addLong(_pio.binaryserializer.longFromBytes(e,o,i));break;case 56:case 60:n.addULong(_pio.binaryserializer.ulongFromBytes(e,o,i));break;case 3:n.addDouble(_pio.binaryserializer.doubleFromBytes(e,o,i));break;case 2:n.addFloat(_pio.binaryserializer.floatFromBytes(e,o,i));break;case 1:n.addBoolean(!0);break;case 0:n.addBoolean(!1)}if(o+=i,null!=n&&0==--r)return n}throw Error("Unexpected: Misaligned message")}},_pio.binaryserializer={pow2:function(e){return 0<=e&&e<31?1<<e:this.pow2[e]||(this.pow2[e]=Math.pow(2,e))},_intEncode:function(e,t){var n;if(4==t)n=[e>>>24&255,e>>>16&255,e>>>8&255,255&e];else{if(0<=e)var o=e-(n=Math.floor(e/this.pow2(32)))*this.pow2(32);else o=e-(n=Math.floor(e/this.pow2(32)))*this.pow2(32),n+=this.pow2(32);n=[n>>>24&255,n>>>16&255,n>>>8&255,255&n,o>>>24&255,o>>>16&255,o>>>8&255,255&o]}return n},_floatEncode:function(e,t,n){var o,r=e<0?1:0,i=~(-1<<n-1),a=1-i;for(e<0&&(e=-e),0===e?e=o=0:isNaN(e)?(o=2*i+1,e=1):1/0===e?(o=2*i+1,e=0):a<=(o=Math.floor(Math.log(e)/Math.LN2))&&o<=i?(e=Math.floor((e*this.pow2(-o)-1)*this.pow2(t)),o+=i):(e=Math.floor(e/this.pow2(a-t)),o=0),i=[];8<=t;)i.push(e%256),e=Math.floor(e/256),t-=8;for(o=o<<t|e,n+=t;8<=n;)i.push(255&o),o>>>=8,n-=8;return i.push(r<<n|o),i.reverse(),i},bytesFromString:function(e){for(var t=[],n=0;n<e.length;n++)if(e.charCodeAt(n)<=127)t.push(e.charCodeAt(n));else for(var o=encodeURIComponent(e.charAt(n)).substr(1).split("%"),r=0;r<o.length;r++)t.push(parseInt(o[r],16));return t},bytesFromInt:function(e){return this._intEncode(e,4)},bytesFromUInt:function(e){return this._intEncode(e,4)},bytesFromLong:function(e){return this._intEncode(e,8)},bytesFromULong:function(e){return this._intEncode(e,8)},bytesFromFloat:function(e){return this._floatEncode(e,23,8)},bytesFromDouble:function(e){return this._floatEncode(e,52,11)},_intDecode:function(e,t,n,o,r){var i=t+n-1;t=r&&n==o&&128&e[t],r=1;for(var a=o=0;a<n;a++){var s=e[i-a];t&&(r=(s=(255^s)+r)>>8,s&=255),o+=s*this.pow2(8*a)}return t?-o:o},_float32Decode:function(e,t){var n=1-2*((r=e.slice(t,t+4).reverse())[3]>>7),o=(r[3]<<1&255|r[2]>>7)-127,r=(127&r[2])<<16|r[1]<<8|r[0];return 128===o?0!==r?NaN:1/0*n:-127===o?n*r*this.pow2(-149):n*(1+r*this.pow2(-23))*this.pow2(o)},_float64Decode:function(e,t){var n=1-2*((r=e.slice(t,t+8).reverse())[7]>>7),o=((r[7]<<1&255)<<3|r[6]>>4)-1023,r=(15&r[6])*this.pow2(48)+r[5]*this.pow2(40)+r[4]*this.pow2(32)+r[3]*this.pow2(24)+r[2]*this.pow2(16)+r[1]*this.pow2(8)+r[0];return 1024===o?0!==r?NaN:1/0*n:-1023===o?n*r*this.pow2(-1074):n*(1+r*this.pow2(-52))*this.pow2(o)},stringFromBytes:function(e,t,n){for(var o="",r=t;r<t+n;r++)o+=e[r]<=127?37===e[r]?"%25":String.fromCharCode(e[r]):"%"+e[r].toString(16).toUpperCase();return decodeURIComponent(o)},intFromBytes:function(e,t,n){return this._intDecode(e,t,n,4,!0)},uintFromBytes:function(e,t,n){return this._intDecode(e,t,n,4,!1)},longFromBytes:function(e,t,n){return this._intDecode(e,t,n,8,!0)},ulongFromBytes:function(e,t,n){return this._intDecode(e,t,n,8,!1)},floatFromBytes:function(e,t,n){return 4==n?this._float32Decode(e,t):NaN},doubleFromBytes:function(e,t,n){return 8==n?this._float64Decode(e,t):NaN}};for(var c=[],e=0;65!=e;e++)c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(e)]=e;_pio.base64encode=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n],r=++n<=e.length?e[n]:NaN,i=++n<=e.length?e[n]:NaN,a=o>>2,s=(o=(3&o)<<4|r>>4,(15&r)<<2|i>>6),l=63&i;isNaN(r)?s=l=64:isNaN(i)&&(l=64),t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)),t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)),t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(s)),t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l))}return t.join("")},_pio.base64decode=function(e){for(var t=[],n=0;n<e.length;n++){var o=c[e.charCodeAt(n)],r=++n<e.length?c[e.charCodeAt(n)]:64,i=++n<e.length?c[e.charCodeAt(n)]:64,a=++n<e.length?c[e.charCodeAt(n)]:64,s=(15&r)<<4|i>>2,l=(3&i)<<6|a;t.push(o<<2|r>>4),64!=i&&(t.push(s),64!=a&&t.push(l))}return t}}(),_pio.achievements=function(r){function i(e,t){var n=new _pio.achievement(e.identifier,e.title,e.description,e.imageurl,e.progress,e.progressgoal,e.lastupdated);if("string"!=typeof s.myAchievements)for(var o=0;o<s.myAchievements.length;o++)s.myAchievements[o].id==n.id&&(s.myAchievements[o]=n,s.currentVersion=null);if(t)for(o=0;o<s.onCompleteHandlers.length;o++)(0,s.onCompleteHandlers[o])(n);return n}var a=null;this.myAchievements="[ERROR: You tried to access achievements.myAchievements before loading them. You have to call the refresh method first.]",this.onCompleteHandlers=[];var s=this;this.addOnComplete=function(e){if("function"!=typeof e||1!=e.length)throw new PlayerIOError(PlayerIOErrorCode.InvalidArgument,"Expects argument to be a function that takes an achievement as an argument.");s.onCompleteHandlers.push(e)},this.get=function(e){if("string"==typeof s.myAchievements)return null;for(var t=0;t<s.myAchievements.length;t++)if(s.myAchievements[t].id==e)return s.myAchievements[t];return null},this.refresh=function(e,t){r.achievementsRefresh(a,e,t,function(e){if(a!=e.version)if(a=e.version,null==e.achievements||0==e.achievements.length)s.myAchievements=[];else{for(var t=[],n=0;n<e.achievements.length;n++){var o=e.achievements[n];t.push(new _pio.achievement(o.identifier,o.title,o.description,o.imageurl,o.progress,o.progressgoal,o.lastupdated))}s.myAchievements=t}})},this.load=function(e,t,n){"object"==typeof e||requests.length?r.achievementsLoad(e,t,n,function(e){if(null==e||0==e.length)return{};for(var t={},n=0;n<e.userachievements.length;n++){for(var o=e.userachievements[n],r=[],i=0;i<o.achievements.length;i++){var a=o.achievements[i];r.push(new _pio.achievement(a.identifier,a.title,a.description,a.imageurl,a.progress,a.progressgoal,a.lastupdated))}t[o.userid]=r}return t}):(e=_pio.error("The first argument to load should be an array: client.achievements.load(['user1', 'user2', ...], ...)"),_pio.handleError(e,n,e.code,e.message))},this.progressSet=function(e,t,n,o){r.achievementsProgressSet(e,t,n,o,function(e){return i(e.achievement,e.completednow)})},this.progressAdd=function(e,t,n,o){r.achievementsProgressAdd(e,t,n,o,function(e){return i(e.achievement,e.completednow)})},this.progressMax=function(e,t,n,o){r.achievementsProgressMax(e,t,n,o,function(e){return i(e.achievement,e.completednow)})},this.progressComplete=function(e,t,n){r.achievementsProgressComplete(e,t,n,function(e){return i(e.achievement,e.completednow)})}},_pio.achievement=function(e,t,n,o,r,i,a){this.id=e,this.title=t,this.description=n,this.imageUrl=o,this.progress=void 0===r?0:r,this.progressGoal=i,this.lastUpdated=new Date(1e3*a),this.progressRatio=this.progress/this.progressGoal,this.completed=this.progress==this.progressGoal},_pio.playerInsight=function(r){function o(e){t.playersOnline=-1==e.playersonline?"[ERROR: The current connection does not have the rights required to read the playersonline variable.]":e.playersonline,t.segments=_pio.convertFromKVArray(e.segments)}this.playersOnline="[ERROR: You tried to access playerInsight.playersOnline before loading it. You have to call the refresh method first.]",this.segments={};var t=this;this.refresh=function(e,t){r.playerInsightRefresh(e,t,function(e){o(e.state)})},this.setSegments=function(e,t,n){r.playerInsightSetSegments(_pio.convertToSegmentArray(e),t,n,function(e){o(e.state)})},this.trackInvitedBy=function(e,t,n,o){r.playerInsightTrackInvitedBy(e,t,n,o,function(e){})},this.trackEvent=function(e,t,n,o){r.playerInsightTrackEvents([{eventtype:e,value:t}],n,o,function(e){})},this.trackExternalPayment=function(e,t,n,o){r.playerInsightTrackExternalPayment(e,t,n,o,function(e){})},this.sessionKeepAlive=function(e,t){r.playerInsightSessionKeepAlive(e,t,function(e){})}},_pio.oneScore=function(o){this.percentile="[ERROR: You tried to access oneScore.percentile before loading the OneScore. You have to call the refresh method first.]",this.score="[ERROR: You tried to access oneScore.score before loading the OneScore. You have to call the refresh method first.]",this.topRank="[ERROR: You tried to access oneScore.topRank before loading the OneScore. You have to call the refresh method first.]";var r=this;this.refresh=function(e,t){o.oneScoreRefresh(e,t,function(e){e=new _pio.oneScoreValue(e.onescore.percentile,e.onescore.score,e.onescore.toprank),r.percentile=e.percentile,r.score=e.score,r.topRank=e.toprank})},this.set=function(e,t,n){o.oneScoreSet(e,t,n,function(e){return e=new _pio.oneScoreValue(e.onescore.percentile,e.onescore.score,e.onescore.toprank),r.percentile=e.percentile,r.score=e.score,r.topRank=e.toprank,e})},this.add=function(e,t,n){o.oneScoreAdd(e,t,n,function(e){return e=new _pio.oneScoreValue(e.onescore.percentile,e.onescore.score,e.onescore.toprank),r.percentile=e.percentile,r.score=e.score,r.topRank=e.toprank,e})},this.load=function(i,e,t){"object"==typeof i||requests.length?o.oneScoreLoad(i,e,t,function(e){if(null==e||null==e.onescores||0==e.onescores.length)return[];for(var t=[],n=0,o=0;o<i.length;o++){var r=e.onescores[n];r&&i[o]==r.userid?(t.push(new _pio.oneScoreValue(r.percentile,r.score,r.toprank)),n++):t.push(null)}return t}):(e=_pio.error("The first argument to load should be an array: client.oneScore.load(['user1', 'user2', ...], ...)"),_pio.handleError(e,t,e.code,e.message))}},_pio.oneScoreValue=function(e,t,n){this.percentile=void 0===e?0:e,this.score=void 0===t?0:t,this.topRank=void 0===n?0:n},_pio.notifications=function(l){function c(e){if(e.version!=f){var t=[];if(e.endpoints)for(var n=0;n!=e.endpoints.length;n++){var o=e.endpoints[n];t[n]=new _pio.notificationEndpoint(o.type,o.identifier,_pio.convertFromKVArray(o.configuration),!!o.enabled)}f=e.version,u.myEndpoints=t}}function r(e){var t=[];if(e&&0<e.length)for(var n=0;n!=e.length;n++){var o=e[n];o.type&&o.identifier&&t.push({type:o.type,identifier:o.identifier})}return t}this.myEndpoints="[ERROR: You tried to access notifications.myEndpoints before calling refresh.]";var u=this,f="";this.refresh=function(e,t){l.notificationsRefresh(f,e,t,c)},this.registerEndpoint=function(e,t,n,o,r,i){var a;e:{if(""!=f)for(a=0;a!=u.myEndpoints.length;a++){var s=u.myEndpoints[a];if(s.type==e&&s.identifier==t){a=s;break e}}a=null}(s=null==a||a.enabled!=o)||(s=JSON.stringify(a.configuration)!=JSON.stringify(n)),s?l.notificationsRegisterEndpoints(f,[{type:e,identifier:t,configuration:_pio.convertToKVArray(n),enabled:o}],r,i,c):r&&r()},this.toggleEndpoints=function(e,t,n,o){0<(e=r(e)).length?l.notificationsToggleEndpoints(f,e,!!t,n,o,c):n&&n()},this.deleteEndpoints=function(e,t,n){0<(e=r(e)).length?l.notificationsDeleteEndpoints(f,e,t,n,c):t&&t()},this.send=function(e,t,n){for(var o=[],r=0;r!=e.length;r++){var i=e[r],a={recipient:i.recipientUserId,endpointtype:i.endpointType,data:{}};for(var s in 0!=(a.recipient+"").length&&0!=(a.endpointtype+"").length||console.log("error"),i)"recipientUserId"!=s&&"endpointType"!=s&&(a.data[s]=i[s]);o[r]=a}0<o.length?l.notificationsSend(o,t,n,null):t&&t()}},_pio.notificationEndpoint=function(e,t,n,o){this.type=e,this.identifier=t,this.configuration=n,this.enabled=o},_pio.publishingNetwork=function(n,e){var i=this;this.profiles=new _pio.publishingNetworkProfiles(n),this.payments=new _pio.publishingNetworkPayments(n),this.relations=new _pio.publishingNetworkRelations(n,e,this),this.userToken="[ERROR: you tried to access publishingNetwork.userToken before calling publishingNetwork.refresh(callback)]",this.refresh=function(e,t){n.socialRefresh(e,t,function(e){i.userToken=e.myprofile.usertoken,i.profiles.myProfile=new _pio.publishingNetworkProfile(e.myprofile),void 0===_pio.friendLookup&&(_pio.friendLookup={},_pio.blockedLookup={});var t=_pio.friendLookup[i.profiles.myProfile.userId],n=_pio.blockedLookup[i.profiles.myProfile.userId];t||n||(t=_pio.friendLookup[i.profiles.myProfile.userId]={},n=_pio.blockedLookup[i.profiles.myProfile.userId]={}),i.relations.friends=[];for(var o=0;o!=e.friends.length;o++){var r=new _pio.publishingNetworkProfile(e.friends[o]);i.relations.friends.push(r),t[r.userId]=!0}for(o=0;o!=e.blocked.length;o++)n[e.blocked[o]]=!0})}},_pio.showDialog=function(e,t,n,o){if(void 0===window.PublishingNetwork)throw new PlayerIOError(PlayerIOErrorCode.PublishingNetworkNotAvailable,"PublishingNetwork.js was not found on the current page. You have to include the 'piocdn.com/publishingnetwork.js' on the containing page to show dialogs. See http://playerio.com/documentation/ for more information.");n.__apitoken__=t.token,window.PublishingNetwork.dialog(e,n,o)},_pio.publishingNetworkPayments=function(r){this.showBuyCoinsDialog=function(e,t,n,o){t||(t={}),t.coinamount=e,r.payVaultPaymentInfo("publishingnetwork",_pio.convertToKVArray(t),null,function(e){_pio.showDialog("buy",r,e,function(e){e.error?o(new PlayerIOError(PlayerIOErrorCode.GeneralError,e.error)):n(e)})},o,function(e){return _pio.convertFromKVArray(e.providerarguments)})},this.showBuyItemsDialog=function(e,t,n,o){r.payVaultPaymentInfo("publishingnetwork",_pio.convertToKVArray(t||{}),_pio.convertBuyItems(e),function(e){_pio.showDialog("buy",r,e,function(e){e.error?o(new PlayerIOError(PlayerIOErrorCode.GeneralError,e.error)):n(e)})},o,function(e){return _pio.convertFromKVArray(e.providerarguments)})}},_pio.publishingNetworkProfiles=function(n){this.myProfile="[ERROR: you tried to access publishingNetworkProfiles.myProfile before calling publishingNetwork.refresh(callback)]",this.showProfile=function(e,t){_pio.showDialog("profile",n,{userId:e},t)},this.loadProfiles=function(a,e,t){n.socialLoadProfiles(a,e,t,function(e){for(var t=[],n=0;n!=a.length;n++){var o=a[n];t[n]=null;for(var r=0;r!=e.profiles.length;r++){var i=e.profiles[r];if(i&&i.userid==o){t[n]=new _pio.publishingNetworkProfile(e.profiles[r]);break}}}return t})}},_pio.publishingNetworkProfile=function(e){this.userId=e.userid,this.displayName=e.displayname,this.avatarUrl=e.avatarurl,this.lastOnline=new Date(e.lastonline),this.countryCode=e.countrycode},_pio.publishingNetworkRelations=function(n,t,o){this.friends="[ERROR: you tried to access publishingNetworkRelations.friends before calling publishingNetwork.refresh(callback)]",this.isFriend=function(e){if(void 0!==_pio.friendLookup&&void 0!==_pio.friendLookup[t])return _pio.friendLookup[t][e]||!1;throw new PlayerIOError(PlayerIOErrorCode.PublishingNetworkNotLoaded,"Cannot access profile, friends, ignored before Publishing Network has been loaded. Please refresh Publishing Network first")},this.isBlocked=function(e){if(void 0!==_pio.blockedLookup&&void 0!==_pio.blockedLookup[t])return _pio.blockedLookup[t][e]||!1;throw new PlayerIOError(PlayerIOErrorCode.PublishingNetworkNotLoaded,"Cannot access profile, friends, ignored before Publishing Network has been loaded. Please refresh Publishing Network first")},this.showRequestFriendshipDialog=function(e,t){_pio.showDialog("requestfriendship",n,{userId:e},t)},this.showRequestBlockUserDialog=function(e,t){_pio.showDialog("requestblockuser",n,{userId:e},function(){o.refresh(function(){t&&t()},function(){t&&t()})})},this.showFriendsManager=function(t){_pio.showDialog("friendsmanager",n,{},function(e){e.updated?o.refresh(function(){t&&t()},function(){t&&t()}):t&&t()})},this.showBlockedUsersManager=function(t){_pio.showDialog("blockedusersmanager",n,{},function(e){e.updated?o.refresh(function(){t&&t()},function(){t&&t()}):t&&t()})}};