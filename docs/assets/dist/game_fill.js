!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}({2:function(e,t,n){"use strict";function o(e){return document.getElementById(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.$id=o,t.$idA=function(e){return o(e)},t.$ready=function(e){document.addEventListener("DOMContentLoaded",e)},t.removeAllChildNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.randomArrayItem=function(e){return e[Math.floor(Math.random()*e.length)]},t.randomArrayItemZipf=function(e){const t=Math.log(e.length+1);return e[Math.min(0|Math.exp(Math.random()*t),e.length)-1]},t.shuffle=function(e){for(let t=e.length-1;t;--t){const n=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[n],e[n]=o}},t.sum=function(e){return e.reduce((e,t)=>e+t,0)},t.formatHexColor=function(e){return"#"+("00000"+e.toString(16)).slice(-6)},t.clamp=function(e,t,n){return Math.max(t,Math.min(e,n))}},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(24),i=n(2),r="D!00\nCD!10\naaBaaBD!02\nDDaaC!10\nEEbbA!23\ncaAEE!01\naaAEEaaC!22\nDaaBEE!22\nEEEabA!03\nEDbaBE!22\nDEaaCE!00\nbaBEEE!31\nEaaCEDB!00\nabBEEEaaA!12\nacAabBEEE!41\nabAEcaAEE!32\naaCaaCEEbbA!40\nEaaCEDaaB!30\naaAEEED!22\naaBEaaCED!42\nDEaaCEaaB!13\nCDEaaCE!21\nEEbaBabBaaC!41\nEECEC!10\naaBEaaCcaAE!33\nECEEaaC!23\nEbaBbaBDE!12\nEEEEaaA!01\nEabBEED!31\nEEaaBED!00\naaCcaAEEcaA!32\nEEDEC!20\nEaaCaaBEE!40\nDCEEE!42\ncaAEEEaaB!12\nEEcaAaaCE!03\nbaBEcaAEE!30\nEEEabBE!21\nEEbaBDE!02\naaCEEEbaB!43\nEEaaCEbaB!23\nEaaBEEE!00 << error (need new rule to prevent shortcut)\nEEbaBDE!11\nEabBEEE!43\nEEEaaCE!33 << error^\nbbBFaabaAFaaD!00\nEFaaDaaDD!34\nFECFE!04\ncbAcbAcaBFF!10\nFFEacBaaD!02\nEFbaCaaDaaaaB!20\nabBFaabaAFF!24\nabCFaaaaBaaDF!40\ncbAdaAFcaBE!43\nEbaCFcaBD!14\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n".split(/[\r\n]+/),s=8,a=8,l=new o.Solver(s,a),u=i.$idA("gridTextNum"),c=i.$idA("gridText"),E=[];function f(){l.solve(),function(){const e=l.getRoot();for(let t=0;t<s;t++){const n=E[t];for(let o=0;o<a;o++){const i=l.getCell(t,o);let r="fill";i.solver.mYes&&(r+=" fill-solved"),e&&e!==i&&e.solver.ufFind()===i.solver.ufFind()&&(r+=" fill-to-root"),i.isRoot?r+=" fill-root":i.active||(r+=" fill-disabled"),n[o].className=r,i.solver.moves.forEach((e,t)=>{n[o].children[t].className=["","fill-m","fill-y"][e]})}}}(),c.value=l.toString()}i.$ready(function(){const e=i.$idA("fill-table");e.appendChild(document.createElement("tbody"));for(let t=0;t<s;t++){const n=e.insertRow(-1),o=[];E.push(o);for(let e=0;e<a;e++){const i=n.insertCell(-1);o.push(i),i.className="fill",i.addEventListener("click",()=>{l.invertCell(t,e),f()}),i.addEventListener("contextmenu",n=>(n.preventDefault(),l.setRoot(t,e),f(),!1));for(let e=0;e<4;e++)i.appendChild(document.createElement("div"))}}function t(){l.loadString(c.value),f()}c.addEventListener("change",t),u.addEventListener("change",()=>{c.value=r[+u.value-1],t()}),u.max=r.length.toString(),f()})},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(25),i=n(8);t.Solver=class{constructor(e,t){this.rows=e,this.cols=t,this.grid=new Array(e);for(let n=0;n<e;n++){const e=new Array(t);for(let i=0;i<t;i++)e[i]=new o.Cell(n,i);this.grid[n]=e}for(let n=0;n<e;n++)for(let e=0;e<t;e++)i.DELTA.forEach((t,o)=>{const i=n+t[0],r=e+t[1];this.grid[n][e].setNeighbor(o,this.inGrid(i,r)?this.grid[i][r]:void 0)})}getRoot(){return this.root}setRoot(e,t){this.root&&(this.root.isRoot=!1);const n=this.grid[e][t];this.root!==n?(this.root=n,n.isRoot=!0,n.active=!0):this.root=void 0}invertCell(e,t){const n=this.grid[e][t];n.active=!this.grid[e][t].active,!n.active&&n.isRoot&&(n.isRoot=!1)}getCell(e,t){return this.grid[e][t]}solve(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)this.grid[e][t].reset();const e=[];function t(t){t.solver.inQueue||(t.solver.inQueue=!0,e.push([t.r,t.c]))}for(let e=0;e<this.rows;e++)for(let n=0;n<this.cols;n++){const o=this.grid[e][n];o.active&&t(o)}for(;e.length;){const[n,o]=e.pop(),r=this.grid[n][o].solver;r.inQueue=!1,r.mMaybe&&(i.DELTA.forEach((e,s)=>{if(r.moves[s]!==i.MoveType.MAYBE)return;const a=n+e[0],l=o+e[1],u=this.grid[a][l],c=r.ufFind(),E=u.solver.ufFind();(c===E||c.ufSourceSink&&E.ufSourceSink&&r.mMaybe>1&&u.solver.mMaybe>1)&&(t(u),r.solveMove(s,!1),u.solver.solveMove(i.invMove(s),!1))}),r.mMaybe<=r.remain&&i.DELTA.forEach((e,s)=>{const a=n+e[0],l=o+e[1];if(!this.inGrid(a,l))return;const u=this.grid[a][l];if(t(u),r.moves[s]!==i.MoveType.MAYBE)return;const c=!(!r.remain||!u.solver.remain);if(r.solveMove(s,c),u.solver.solveMove(i.invMove(s),c),c)for(let e of r.ufUnion(u.solver).ufEnds)t(e.cell)}),r.mMaybe&&!r.remain&&i.DELTA.forEach((e,s)=>{if(r.moves[s]!==i.MoveType.MAYBE)return;const a=n+e[0],l=o+e[1],u=this.grid[a][l];t(u),r.solveMove(s,!1),u.solver.solveMove(i.invMove(s),!1)}))}console.log(this.grid)}loadString(e){for(let e=0;e<this.rows;e++){const t=this.grid[e];for(let e=0;e<this.cols;e++)t[e].active=t[e].isRoot=!1}this.root=void 0;const[t,n]=e.split("!",2);let o=0,i=0,r=0;for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);let s=n<97?n-65:n-97;if(!(s<0||s>=26)){for(const e=Math.min(i+s+r,this.cols);i<e;i++)this.grid[o][i].active=!0;if(n<97||e+1===t.length){if(++o===this.rows)break;i=0,r=0}else r=1,(s=t.charCodeAt(++e)-97)<0||s>=26||(i+=s+r)}}n&&n.length>=2&&this.setRoot(parseInt(n[0],36),parseInt(n[1],36))}toString(){let e="",t="";for(let n=0;n<this.grid.length;n++){const o=this.grid[n];let i="",r=0,s=0,a=!0,l=0;for(let n=0;n<o.length;n++){const i=o[n];i.active&&!a&&(e+=t+String.fromCharCode(97+r-l)+String.fromCharCode(97+s-1),s=r=0,l=1,t=""),(a=i.active)?r++:s++}r||l?(e+=t+String.fromCharCode(65+r-l),t=""):t+="A",e+=i}return this.root&&(e+="!"+this.root.r+this.root.c),e}inGrid(e,t){return e>=0&&t>=0&&e<this.rows&&t<this.cols}}},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(26);t.Cell=class{constructor(e,t){this.r=e,this.c=t,this.active=!1,this.isRoot=!1,this.solver=new o.SolverState(this),this.neighbors=[void 0,void 0,void 0,void 0]}setNeighbor(e,t){this.neighbors[e]=t}reset(){this.active?this.solver.reset(this.neighbors.map(e=>!!e&&e.active),this.isRoot):this.solver.disable()}}},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(2),i=n(8);t.SolverState=class{constructor(e){this.cell=e,this.inQueue=!1,this.isSourceSink=!1,this.moves=[],this.mYes=0,this.mMaybe=0,this.remain=0,this.ufParent=this,this.ufSize=1,this.ufEnds=[this,this],this.ufSourceSink=!1,this.disable()}disable(){this.reset([!1,!1,!1,!1])}reset(e,t=!1){this.inQueue=!1,this.moves=e.map(e=>e?i.MoveType.MAYBE:i.MoveType.NO),this.mYes=0,this.mMaybe=o.sum(e.map(e=>+e)),this.isSourceSink=this.mMaybe<2||t,this.remain=this.isSourceSink?1:2,this.resetUF()}resetUF(){this.ufParent=this,this.ufSize=1,this.ufEnds=[this,this],this.ufSourceSink=this.isSourceSink}solveMove(e,t){this.moves[e]=t?i.MoveType.YES:i.MoveType.NO,--this.mMaybe,t&&(++this.mYes,--this.remain)}ufFind(){let e=this;for(;e.ufParent!==e;)e.ufParent=e.ufParent.ufParent,e=e.ufParent;return e}ufUnion(e){let t=this.ufFind(),n=e.ufFind();return t===n?t:(t.ufSize<n.ufSize&&([t,n]=[n,t]),n.ufParent=t,t.ufSize+=n.ufSize,t.ufEnds=[this!==t.ufEnds[0]?t.ufEnds[0]:t.ufEnds[1],e!==n.ufEnds[0]?n.ufEnds[0]:n.ufEnds[1]],t.isSourceSink=t.isSourceSink||n.isSourceSink,t)}}},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DELTA=[[-1,0],[1,0],[0,-1],[0,1]],t.invMove=function(e){return 1^e},function(e){e[e.NO=0]="NO",e[e.MAYBE=1]="MAYBE",e[e.YES=2]="YES"}(t.MoveType||(t.MoveType={}))}});