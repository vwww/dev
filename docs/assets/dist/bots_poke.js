!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}({0:function(e,t,n){"use strict";t.__esModule=!0,t.supportsLocalStorage=function(){return!!window.localStorage}},7:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};t.__esModule=!0;var o=n(0);!function(){var e,t;function n(e){var t="th";if(e===(0|e)){var n=e%100;n>3&&n<21||(1==(n%=10)&&(t="st"),2===n&&(t="nd"),3===n&&(t="rd"))}return e+"<sup>"+t+"</sup>"}function a(){if(e&&t){var r=+$("input[name=leaderboard-tie]:checked").val(),o=+$("input[name=leaderboard-limit]:checked").val();(!o||o>e.length)&&(o=e.length);for(var a=+$("#poke-limit-lower").val()||1,i="",l=0;l<o&&!(e[l].num<a);++l)i+=c(e[l],e[l].tie,e[l].rank[r],e[l].rank[0]);$("#leaderboard1").html(i);var u=0;for(i="",l=0;u<o&&l<t.length;++l)t[l].num<a||(i+=c(t[l],0,l+1,t[l].rank[r]),u++);document.getElementById("leaderboard2").innerHTML=i,$(".timeago_dynamic").timeago()}function c(e,t,r,o){var a=new Date(1e3*e.time);return"<li"+(t>1?' class="indent">':">")+'<h1 data-rank="'+r+(t?'" class="tie">':'">')+n(r)+'</h1><h1 class="ranko" data-rank="'+o+'">'+n(o)+'</h1><img src="https://graph.facebook.com/'+e.uid+'/picture?width=80&amp;height=80"><h2><a href="https://www.facebook.com/'+e.uid+'">'+e.name+"</a></h2><h3>"+e.num.toLocaleString()+'</h3><span title="'+a.toISOString()+'" class="timeago_dynamic">'+a.toString()+"</span></li>"}}function i(){a()}function l(n){e=Object.keys(n).map(function(e){return t=n[e],r({},t,{rank:[0,0,0,0,0,0],tie:0,uid:e});var t}),t=e.slice(0),e.sort(function(e,t){return e.num!==t.num?t.num-e.num:e.time-t.time}),t.sort(function(e,t){return t.time-e.time}),function(){for(var n=0,r=0,o=0,a=0,i=0;i<e.length;++i){var l=e[i],u=0;if(i&&l.num===e[i-1].num)u=2;else{for(++n,r=o=i+1;o<e.length&&l.num===e[o].num;)++o;a=(r+o)/2,u=r!==o?1:0}var c=i+1;e[i].tie=u,e[i].rank[1]=n,e[i].rank[2]=r,e[i].rank[3]=a,e[i].rank[4]=o,e[i].rank[5]=c}for(i=0;i<t.length;++i)t[i].rank[0]=i+1}(),a();var o=Array.apply(null,Array(e.length)).map(function(e,t){return t+1}),i=t[0].time;Plotly.restyle("opponentPlot",{x:[o,o],y:[e.map(function(e){return e.num}),t.map(function(e){return(i-e.time)/86400})]})}function u(){firebase.initializeApp({apiKey:"AIzaSyDzwR0qYbl6QzA4pgw-LF7M6yxG2bWC7xo",databaseURL:"https://victor-poke.firebaseio.com"});var e=firebase.database();e.ref("info").on("value",function(e){if(e){var t,n,r=e.val();t=r.pokes,n=r.ticks,$("#poke_r").text(t.toLocaleString()),$("#poke_t").text(n.toLocaleString()),$("#poke_c").text((100*t/n).toFixed(4)+"%")}}),e.ref("poke").on("value",function(e){e&&l(e.val())})}$(function(){if(u(),$("input[name=leaderboard-limit]").change(function(){a(),o.supportsLocalStorage()&&(localStorage.leaderboardLimit=$(this).val())}),$("input[name=leaderboard-tie]").change(function(){i(),o.supportsLocalStorage()&&(localStorage.leaderboardTie=$(this).val())}),$("#poke-limit-lower").change(function(){i(),o.supportsLocalStorage()&&(localStorage.leaderboardMinPokes=$(this).val())}),o.supportsLocalStorage()){var e=localStorage.leaderboardLimit,t=localStorage.leaderboardTie,n=localStorage.leaderboardMinPokes;e&&$('input:radio[name=leaderboard-limit][value="'+e+'"]').click(),t&&$('input:radio[name=leaderboard-tie][value="'+t+'"]').click(),n&&$("#poke-limit-lower").val(n)}Plotly.newPlot("opponentPlot",[{name:"highest first",type:"scatter"},{name:"recent first",type:"scatter",yaxis:"y2"}],{xaxis:{title:"rank",type:"log"},yaxis:{title:"number of pokes",type:"log"},yaxis2:{title:"days before most recent poke",type:"log",overlaying:"y",side:"right"},showlegend:!1})}),$(window).resize(function(){Plotly.Plots.resize(Plotly.d3.select("#opponentPlot").node())})}()}});